<div class="onboarding-container">
  <!-- Two Column Layout -->
  <div class="onboarding-content">
    
    <!-- Left Column: Progress & Navigation -->
    <div class="left-column">
      <!-- Header -->
      <div class="onboarding-header">
        <h1>Welcome!</h1>
        <p>Let's get you started</p>
      </div>

      <!-- Progress Bar -->
      <div class="progress-section">
        <div class="progress-bar-bg">
          <div class="progress-bar-fill" [style.width.%]="getProgressPercentage()"></div>
        </div>
        <p class="progress-text">Step {{ currentStep }} of {{ totalSteps }}</p>
      </div>

      <!-- Steps List -->
      <div class="steps-list">
        <div 
          class="step-item"
          [class.completed]="currentStep > 1"
          [class.current]="currentStep === 1"
          (click)="currentStep = 1">
          <div class="step-indicator">
            <ion-icon *ngIf="currentStep > 1" name="checkmark-circle"></ion-icon>
            <span *ngIf="currentStep <= 1" class="step-number">1</span>
          </div>
          <div class="step-info">
            <h3>About You</h3>
            <p>Your name</p>
          </div>
        </div>

        <div 
          class="step-item"
          [class.completed]="currentStep > 2"
          [class.current]="currentStep === 2"
          (click)="currentStep > 1 ? currentStep = 2 : null">
          <div class="step-indicator">
            <ion-icon *ngIf="currentStep > 2" name="checkmark-circle"></ion-icon>
            <span *ngIf="currentStep <= 2" class="step-number">2</span>
          </div>
          <div class="step-info">
            <h3>Native Language</h3>
            <p>Your primary language</p>
          </div>
        </div>

        <div 
          class="step-item"
          [class.completed]="currentStep > 3"
          [class.current]="currentStep === 3"
          (click)="currentStep > 2 ? currentStep = 3 : null">
          <div class="step-indicator">
            <ion-icon *ngIf="currentStep > 3" name="checkmark-circle"></ion-icon>
            <span *ngIf="currentStep <= 3" class="step-number">3</span>
          </div>
          <div class="step-info">
            <h3>Languages</h3>
            <p>What you want to learn</p>
          </div>
        </div>

        <div 
          class="step-item"
          [class.completed]="currentStep > 4"
          [class.current]="currentStep === 4"
          (click)="currentStep > 3 ? currentStep = 4 : null">
          <div class="step-indicator">
            <ion-icon *ngIf="currentStep > 4" name="checkmark-circle"></ion-icon>
            <span *ngIf="currentStep <= 4" class="step-number">4</span>
          </div>
          <div class="step-info">
            <h3>Goals</h3>
            <p>Your learning goals</p>
          </div>
        </div>

        <div 
          class="step-item"
          [class.completed]="currentStep > 5"
          [class.current]="currentStep === 5"
          (click)="currentStep > 4 ? currentStep = 5 : null">
          <div class="step-indicator">
            <ion-icon *ngIf="currentStep > 5" name="checkmark-circle"></ion-icon>
            <span *ngIf="currentStep <= 5" class="step-number">5</span>
          </div>
          <div class="step-info">
            <h3>Experience</h3>
            <p>Your level & schedule</p>
          </div>
        </div>
      </div>

      <!-- Navigation Buttons -->
      <div class="nav-buttons">
        <ion-button 
          fill="clear" 
          [disabled]="currentStep === 1"
          (click)="previousStep()">
          <ion-icon name="chevron-back" slot="start"></ion-icon>
          Previous
        </ion-button>

        <ion-button 
          fill="clear" 
          *ngIf="currentStep < totalSteps"
          [disabled]="!canProceed()"
          (click)="nextStep()">
          Next
          <ion-icon name="chevron-forward" slot="end"></ion-icon>
        </ion-button>
      </div>
    </div>

    <!-- Vertical Separator -->
    <div class="separator"></div>

    <!-- Right Column: Current Step Content -->
    <div class="right-column">
      <div class="step-content-card">
        
        <!-- Step 1: Name -->
        <div *ngIf="currentStep === 1">
          <div class="step-icon-circle">
            <ion-icon name="person"></ion-icon>
          </div>
          <h2 class="step-title">What's your name?</h2>
          <p class="step-description">Let's start with the basics</p>

          <div class="form-fields">
            <div class="form-field">
              <label>First Name *</label>
              <input 
                type="text"
                [(ngModel)]="firstName"
                placeholder="Enter your first name"
                class="modern-input">
            </div>

            <div class="form-field">
              <label>Last Name *</label>
              <input 
                type="text"
                [(ngModel)]="lastName"
                placeholder="Enter your last name"
                class="modern-input">
            </div>
          </div>
        </div>

        <!-- Step 2: Native Language -->
        <div *ngIf="currentStep === 2">
          <div class="step-icon-circle">
            <ion-icon name="language"></ion-icon>
          </div>
          <h2 class="step-title">What's your native language?</h2>
          <p class="step-description">We'll provide lesson feedback in your language</p>

          <div class="language-grid">
            <button 
              *ngFor="let lang of nativeLanguageOptions" 
              class="language-chip"
              [class.selected]="nativeLanguage === lang.code"
              (click)="setNativeLanguage(lang.code)">
              <span class="language-native">{{ lang.native }}</span>
              <span class="language-name">({{ lang.name }})</span>
            </button>
          </div>
        </div>

        <!-- Step 3: Languages to Learn -->
        <div *ngIf="currentStep === 3">
          <div class="step-icon-circle">
            <ion-icon name="globe"></ion-icon>
          </div>
          <h2 class="step-title">What languages would you like to learn?</h2>
          <p class="step-description">Select all languages that interest you</p>

          <div class="options-grid">
            <button 
              *ngFor="let language of availableLanguages"
              class="option-button"
              [class.selected]="selectedLanguages.includes(language)"
              (click)="toggleLanguage(language)">
              {{ language }}
            </button>
          </div>
        </div>

        <!-- Step 4: Learning Goals -->
        <div *ngIf="currentStep === 4">
          <div class="step-icon-circle">
            <ion-icon name="trophy"></ion-icon>
          </div>
          <h2 class="step-title">What are your learning goals?</h2>
          <p class="step-description">Choose what you want to achieve</p>

          <div class="goals-list">
            <button 
              *ngFor="let goal of availableGoals"
              class="goal-button"
              [class.selected]="learningGoals.includes(goal)"
              (click)="toggleGoal(goal)">
              <ion-icon 
                [name]="learningGoals.includes(goal) ? 'checkbox' : 'square-outline'"
                class="checkbox-icon">
              </ion-icon>
              <span>{{ goal }}</span>
            </button>
          </div>
        </div>

        <!-- Step 5: Experience & Schedule -->
        <div *ngIf="currentStep === 5">
          <div class="step-icon-circle">
            <ion-icon name="school"></ion-icon>
          </div>
          <h2 class="step-title">Tell us about your experience</h2>
          <p class="step-description">This helps us match you with the right tutors</p>

          <div class="form-fields">
            <div class="form-field">
              <label>What's your current level?</label>
              <div class="options-list">
                <button 
                  *ngFor="let level of experienceLevels"
                  class="option-button-block"
                  [class.selected]="experienceLevel === level"
                  (click)="setExperienceLevel(level)">
                  {{ level }}
                </button>
              </div>
            </div>

            <div class="form-field">
              <label>How often would you like to practice?</label>
              <div class="options-list">
                <button 
                  *ngFor="let schedule of scheduleOptions"
                  class="option-button-block"
                  [class.selected]="preferredSchedule === schedule"
                  (click)="setPreferredSchedule(schedule)">
                  {{ schedule }}
                </button>
              </div>
            </div>
          </div>
        </div>

        <!-- Action Button -->
        <ion-button 
          *ngIf="currentStep < totalSteps"
          expand="block"
          size="large"
          class="primary-action"
          [disabled]="!canProceed()"
          (click)="nextStep()">
          Continue
          <ion-icon name="arrow-forward" slot="end"></ion-icon>
        </ion-button>

        <ion-button 
          *ngIf="currentStep === totalSteps"
          expand="block"
          size="large"
          color="success"
          class="submit-action"
          [disabled]="!canProceed()"
          (click)="nextStep()">
          Complete Setup
          <ion-icon name="checkmark" slot="end"></ion-icon>
        </ion-button>
      </div>
    </div>

  </div>
</div>
